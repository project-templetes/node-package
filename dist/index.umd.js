#!/usr/bin/env node
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("fs"),require("path"),require("inquirer"),require("commander")):"function"==typeof define&&define.amd?define(["fs","path","inquirer","commander"],t):t((e||self).fs,e.path,e.inquirer,e.commander)}(this,function(e,t,r,n){function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,t}var a,s=/*#__PURE__*/i(e),c=/*#__PURE__*/i(t),u=/*#__PURE__*/o(r),l=function(e){try{return Promise.resolve(u.default.prompt([{type:"input",name:"dir",message:"Enter the name of the directory",default:"redux-provider"}])).then(function(t){return s.existsSync(c.join(e,t.dir))?(console.log(d,"Directory "+e+" already exists"),l(e)):[c.join(e,t.dir),c.join(e,t.dir,"states")]})}catch(e){return Promise.reject(e)}},f=function(e,t){try{return Promise.resolve(u.default.prompt([{type:"input",name:"baseDir",message:"Where do you want to create the redux-provider?",default:t.split(c.sep).pop()}])).then(function(r){if(r.baseDir!==t.split(c.sep).pop()&&(t=c.isAbsolute(r.baseDir)?r.baseDir:c.join(t,r.baseDir)),!s.existsSync(t)){console.log(d,"Directory "+t+" does not exist"),t=c.join(t,".."),console.log(m,t);var n=s.readdirSync(t).filter(function(e){return!e.startsWith(".")&&s.statSync(c.join(t,e)).isDirectory()});return console.log("Available folders in the directory: "),n.forEach(function(e){console.log(p,e)}),f(e,t)}return Promise.resolve(u.default.prompt([{type:"confirm",name:"confirm",message:"Is this the correct directory? "+t,default:!0}])).then(function(r){if(!r.confirm){console.log(m,t);var n=s.readdirSync(t).filter(function(e){return!e.startsWith(".")&&s.statSync(c.join(t,e)).isDirectory()});return console.log("Available folders in the directory: "),n.forEach(function(e){console.log(p,e)}),f(e,t)}return t})})}catch(e){return Promise.reject(e)}},d="[31m%s[0m",m="[32m%s[0m",p="[34m%s[0m",y="[0m",h=new n.Command;h.parse(process.argv),0===h.args.length&&(a=process.cwd(),Promise.resolve(f(a,a)).then(function(e){return Promise.resolve(l(e)).then(function(e){var t=e[0],r=e[1];return Promise.resolve(function(){try{return Promise.resolve(u.default.prompt([{type:"list",name:"framework",message:"What type of project you are using?",choices:["Next","React"]}])).then(function(e){return e.framework})}catch(e){return Promise.reject(e)}}()).then(function(e){return Promise.resolve(function(){try{return Promise.resolve(u.default.prompt([{type:"confirm",name:"typescript",message:"Are you using TypeScript?"}])).then(function(e){return e.typescript})}catch(e){return Promise.reject(e)}}()).then(function(n){return console.log("[32m->[0m [34m",t,y),console.log("[32m->[0m [34m",e,n?"TS":"JS",y),{baseDir:t,statesDir:r,framework:e,typescript:n}})})})})).then(function(e){try{return function(e){var t=e.baseDir,r=e.statesDir,n="next"===(""+e.framework).toLowerCase(),o=e.typescript;s.mkdirSync(r,{recursive:!0});var i=(n?"'use client';":"")+'\nimport { createSlice } from "@reduxjs/toolkit";\nimport { useLocalStorage } from "../use-local-storage";\n\nconst {\n    readLocalStorage, \n    updateLocalStorage\n} = useLocalStorage(\'auth\', {\n    isAuth: false,\n    token: "",\n  });\n  \nconst auth = createSlice({\n    name: "auth",\n    initialState: readLocalStorage(),\n    reducers: {\n        logout: () => updateLocalStorage(null),\n        login: (state, action) =>  updateLocalStorage({\n            isAuth: true,\n            ...(action.payload)\n        })\n\n    }\n})\n\nexport default auth;\n';s.writeFileSync(c.join(r,o?"auth.ts":"auth.js"),i);var a=(n?"'use client';":"")+'\nimport { Provider } from "react-redux";\nimport { configureStore } from "@reduxjs/toolkit";\nimport auth from "./states/auth";\nimport React, { useEffect } from "react";\nconst store = configureStore({\n  reducer: {\n    auth: auth.reducer,\n  },\n});\nexport const authActions = auth.actions;\nexport default function ReduxProvider({ children }'+(o?": { children: React.ReactNode }":"")+") {\n  useEffect(() => {}, []);\n  return <Provider store={store}>{children}</Provider>;\n};\n";s.writeFileSync(c.join(t,o?"index.tsx":"index.jsx"),a);var u="export const useLocalStorage = (key"+(o?": string":"")+", defaultState"+(o?": any":"")+") => {\n  return {\n      updateLocalStorage: (data"+(o?": any":"")+" = null) => {\n          if (!data) return localStorage.removeItem(key);\n          localStorage.setItem(key, JSON.stringify(data));\n      },\n      readLocalStorage: () => {\n          if (typeof window !== 'undefined') {\n            const data = localStorage.getItem(key);\n            return !!data && data !== \"undefined\"\n              ? JSON.parse(data) \n              : defaultState;\n          } \n          return defaultState;\n        },\n        \n  }\n}\n";s.writeFileSync(c.join(t,o?"use-local-storage.ts":"use-local-storage.js"),u),console.log("Redux provider structure created successfully.")}(e),Promise.resolve()}catch(e){return Promise.reject(e)}}).catch(function(e){"ExitPromptError"===e.name?console.log(d,"Prompt was force closed by the user."):console.error(e)})});
//# sourceMappingURL=index.umd.js.map
